#!/usr/bin/pythonprint 'Content-type: text/html'print#    Dictionary Project#    email:  rick.platek@stuycs.org#   Edison Shi and Genji Noguchimen = ['Jim','Bob','Greg','Cal']women = ['Rachel','Sally','Mary','Cindy']#  Create a dictionary for men's preferencesmenPref={}menPref['Jim'] = {1:'Sally', 2: 'Cindy', 3: 'Rachel', 4:'Mary'}menPref['Bob']={1:'Sally', 2:'Cindy',3:'Rachel',4:'Mary'}menPref['Greg']={1:'Sally',2:'Mary',3:'Cindy',4:'Rachel'}menPref['Cal']={1:'Mary',2:'Sally',3:'Cindy',4:'Rachel'}womenPref={}womenPref['Rachel'] = {1:'Bob', 2:'Cal', 3:'Jim',4:'Greg'}womenPref['Sally'] = {1:'Greg', 2:'Cal', 3:'Bob',4:'Jim'}womenPref['Mary']={1:'Jim', 2:'Cal', 3:'Greg',4:'Bob'}womenPref['Cindy']={1:'Cal',2:'Jim',3:'Greg',4:'Bob'}def makeset(L):    list.sort(L)    ans=[]    for each in L:        if each not in ans:            ans= ans+[each]    return ansdef reversedict(d):    ans={}    keys=makeset(d.values())    for each in d.keys():        if d[each] in ans.keys():            ans+=each        else:            ans[d[each]] = each    return ansdef remove(L, n):    ans=[]    for each in L:        if each not in n:            ans.append(each)    return ansdef generatemarriages(manpref, womanpref, manlist, womanlist):    ans={}    taken=[]    for each in men:        ans[each]= choose(each, manpref, womanpref, manlist, remove(womanlist, taken), 1)        ans[ans[each]]=each        taken.append(ans[each])    return ansdef choose(man, manpref, womanpref, manlist, womanlist, pos):    competition=[]    marry= False    if pos < len(manlist)+1:        for each in remove(manlist, [man]):            if reversedict(manpref[each])[manpref[man][pos]] <= pos:                competition.append(each)        if competition == []:            return manpref[man][pos]        for each in competition:            if reversedict(womanpref[manpref[man][pos]])[man] > reversedict(womanpref[manpref[man][pos]])[each]:                marry=False            elif manpref[man][pos] not in womanlist:                return choose(man,manpref,womanpref,manlist,womanlist,pos+1)            else:                marry=True        if marry == True:            return manpref[man][pos]        else:            return choose(man,manpref,womanpref,manlist,womanlist,pos+1)def printmatches():    stablemarriages=generatemarriages(menPref, womenPref, men, women)    printout="<p>Men:</p><br><ul>"    for each in men:        printout+="<li>"+each+" <3 --> "+stablemarriages[each]+"</li>"    printout+="</ul><br><p>Women:</p><br><ul>"    for each in women:        printout+="<li>"+each+" <3 --> "+stablemarriages[each]+"</li>"    return printoutdef printprefs():    printout="<p>Men:</p><br><ul>"    for man in menPref:        printout+= "<li>" + man + "</li>"        printout+="<ol>"        for prefs in [1, 2, 3, 4]:            printout+= "<li>" + menPref[man][prefs] + "</li>"        printout+="</ol></ul><br><br>"    printout+="<p>Women:</p><br><ul>"    for woman in womenPref:        printout+= "<li>" + woman + "</li>"        printout+="<ol>"        for prefs in [1, 2, 3, 4]:            printout+= "<li>" + womenPref[woman][prefs] + "</li>"        printout+="</ol></ul></br><br>"    return printoutprint '''        <!DOCTYPE Html>        <html>            <head>                <title>Stable Marriages!</title>            </head>            <body>                <p> Here we have the men and women we want to pair up!</p>                <br>                <h1>MEN:</h1>                <ul>                <li> Jim</li>                <li> Bob</li>                <li> Greg</li>                <li> Cal</li>                </ul>                <h1>WOMEN:</h1>                <ul>                <li>Rachel</li>                <li>Mary</li>                <li>Sally</li>                <li>Cindy</li>                </ul>                <p>Here are the preferences:</p>                '''print printprefs()print '''                <p>And here are the stable marriages!</p><br>        '''print printmatches()print '''</body></html>'''